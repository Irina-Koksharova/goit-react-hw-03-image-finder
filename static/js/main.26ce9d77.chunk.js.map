{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/App/App.module.css","components/Container/Container.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","components/Container/Container.jsx","components/Searchbar/Searchbar.jsx","components/Loader/Loader.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Modal/Modal.jsx","components/Button/Button.jsx","components/ImageGallery/ImageGallery.jsx","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Container","children","className","s","container","SearchBar","state","searchQuery","handleChangeForm","e","setState","currentTarget","value","handleSubmitForm","props","onError","onSubmit","preventDefault","trim","resetForm","form","this","button","type","Provider","reactIcons","label","input","name","autoComplete","autoFocus","placeholder","onChange","Component","Spinner","spinner","color","height","width","ImageGalleryItem","image","alt","id","item","src","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","onClick","modal","Button","loading","page","ImageGallery","status","modalImageSrc","modalImageAlt","fetchQuery","pageNumber","url","fetch","then","res","json","hits","length","setStatusRejected","firstLoading","nextLoading","catch","error","message","data","nextData","scrollTo","top","documentElement","scrollHeight","behavior","openModal","nodeName","onToggleModal","current","find","toString","largeImageURL","tags","prevProps","prevState","modalState","list","map","webformatURL","App","showModal","hadleSubmit","queryValue","toLowerCase","showNotification","toast","warn","notify","toggleModal","autoClose","style","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.26ce9d77.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ImageGallery_list__2cYjy\",\"image\":\"ImageGallery_image__2-3zv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__2zBwN\",\"image\":\"ImageGalleryItem_image__1sI4L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__B1Xay\",\"modal\":\"Modal_modal__35upx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notify\":\"App_notify__3GkUI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__1Aa4c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Loader_spinner__3dQA6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__13NhN\"};","import PropTypes from 'prop-types';\nimport s from './Container.module.css';\n\nfunction Container({ children }) {\n  return <div className={s.container}>{children}</div>;\n}\n\nContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n};\n\nexport default Container;\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { FiSearch } from 'react-icons/fi';\nimport { IconContext } from 'react-icons';\nimport s from './Searchbar.module.css';\n\nclass SearchBar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleChangeForm = e => {\n    this.setState({ searchQuery: e.currentTarget.value });\n  };\n\n  handleSubmitForm = e => {\n    const { searchQuery } = this.state;\n    const { onError, onSubmit } = this.props;\n    const clientError =\n      'Incorrect query! Please enter your request in the correct form';\n\n    e.preventDefault();\n    if (searchQuery.trim() === '') {\n      onError(clientError);\n    }\n    onSubmit(searchQuery);\n    this.resetForm();\n  };\n\n  resetForm = () => {\n    this.setState({\n      searchQuery: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className={s.container}>\n        <form className={s.form} onSubmit={this.handleSubmitForm}>\n          <button className={s.button} type=\"submit\">\n            <IconContext.Provider value={{ className: `${s.reactIcons}` }}>\n              <FiSearch />\n            </IconContext.Provider>\n          </button>\n\n          <label className={s.label}>\n            <input\n              className={s.input}\n              type=\"text\"\n              name=\"searchQuery\"\n              value={this.state.searchQuery}\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search images and photos\"\n              onChange={this.handleChangeForm}\n            />\n          </label>\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchBar.propTypes = {\n  onError: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default SearchBar;\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nconst Spinner = () => {\n  return (\n    <div className={s.spinner}>\n      <Loader type=\"Circles\" color=\"#a6c0fe\" height={100} width={100} />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ image, alt, id }) => {\n  return (\n    <li className={s.item} id={id}>\n      <img className={s.image} src={image} alt={alt} id={id} />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  image: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#root-modal');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  children: PropTypes.any.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport s from './Button.module.css';\n\nclass Button extends Component {\n  loading = () => {\n    const { onClick, page } = this.props;\n    onClick(page);\n  };\n\n  render() {\n    return (\n      <button className={s.button} type=\"button\" onClick={this.loading}>\n        Load more\n      </button>\n    );\n  }\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n};\n\nexport default Button;\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport Spinner from '../Loader';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Modal from '../Modal';\nimport Button from '../Button';\n\nclass ImageGallery extends Component {\n  state = {\n    searchQuery: null,\n    page: this.props.page,\n    status: 'idle',\n    modalImageSrc: null,\n    modalImageAlt: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { searchQuery, page } = this.props;\n    if (prevProps.searchQuery !== searchQuery) {\n      this.setState({ searchQuery: null, page, status: 'pending' });\n      searchQuery.trim() !== ''\n        ? this.fetchQuery(page)\n        : this.setState({ status: 'rejected' });\n    }\n  }\n\n  fetchQuery = pageNumber => {\n    const { searchQuery } = this.props;\n    const PUBLIC_URL = 'https://pixabay.com/api/';\n    const KEY = '19018418-5cf416ff9d3b144c810bafa25';\n    const url = `${PUBLIC_URL}?q=${searchQuery}&page=${pageNumber}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n    const clientError =\n      'Sorry, the service cannot process your request😨. Try again, please';\n    const serverError =\n      'Sorry, there are some technical problems 😱😱😱. Please, try again later';\n\n    fetch(url)\n      .then(res => res.json())\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          this.setStatusRejected(clientError);\n        } else if (this.state.searchQuery === null) {\n          this.firstLoading(hits);\n        } else {\n          this.nextLoading(hits);\n        }\n      })\n      .catch(error => this.setStatusRejected(serverError));\n  };\n\n  setStatusRejected = message => {\n    const { onError } = this.props;\n    this.setState({ status: 'rejected' });\n    onError(message);\n  };\n\n  firstLoading = data => {\n    return this.setState({\n      searchQuery: data,\n      page: this.state.page + 1,\n      status: 'resolved',\n    });\n  };\n\n  nextLoading = nextData => {\n    this.setState(state => {\n      return {\n        searchQuery: [...state.searchQuery, ...nextData],\n        page: this.state.page + 1,\n        status: 'resolved',\n      };\n    });\n    this.scrollTo();\n  };\n\n  scrollTo = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  openModal = e => {\n    if (e.target.nodeName === 'IMG') {\n      this.props.onToggleModal();\n      const current = this.state.searchQuery.find(\n        ({ id }) => id.toString() === e.target.id,\n      );\n      this.setState({\n        modalImageSrc: current.largeImageURL,\n        modalImageAlt: current.tags,\n      });\n    }\n  };\n\n  render() {\n    const {\n      searchQuery,\n      status,\n      page,\n      modalImageSrc,\n      modalImageAlt,\n    } = this.state;\n    const { modalState, onToggleModal } = this.props;\n\n    if (status === 'idle' || status === 'rejected') {\n      return <></>;\n    }\n\n    if (status === 'pending') {\n      return <Spinner />;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className={s.list} onClick={this.openModal}>\n            {searchQuery.map(({ id, webformatURL, tags }) => (\n              <ImageGalleryItem\n                key={id}\n                image={webformatURL}\n                alt={tags}\n                id={id}\n              />\n            ))}\n          </ul>\n\n          {modalState && (\n            <Modal onClose={onToggleModal}>\n              <img\n                className={s.image}\n                src={modalImageSrc}\n                alt={modalImageAlt}\n              />\n            </Modal>\n          )}\n\n          <Button page={page} onClick={this.fetchQuery} />\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  modalState: PropTypes.bool.isRequired,\n  onError: PropTypes.func.isRequired,\n  onToggleModal: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  searchQuery: PropTypes.string.isRequired,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './App.module.css';\nimport Container from '../Container';\nimport SearchBar from '../Searchbar';\nimport ImageGallery from '../ImageGallery';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n    showModal: false,\n  };\n\n  hadleSubmit = queryValue => {\n    this.setState({ searchQuery: queryValue.toLowerCase() });\n  };\n\n  showNotification = message => {\n    toast.warn(message, { className: `${s.notify}` });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { searchQuery, page, showModal } = this.state;\n    return (\n      <Container>\n        <SearchBar\n          onSubmit={this.hadleSubmit}\n          onError={this.showNotification}\n        />\n        <ImageGallery\n          searchQuery={searchQuery}\n          page={page}\n          modalState={showModal}\n          onError={this.showNotification}\n          onToggleModal={this.toggleModal}\n        />\n        <ToastContainer autoClose={4500} style={{ width: '700px' }} />\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Searchbar_container__2D6-N\",\"form\":\"Searchbar_form__1osKS\",\"button\":\"Searchbar_button__1IzlS\",\"reactIcons\":\"Searchbar_reactIcons__1vI24\",\"label\":\"Searchbar_label__3QHS4\",\"input\":\"Searchbar_input__1Pi4p\"};"],"sourceRoot":""}